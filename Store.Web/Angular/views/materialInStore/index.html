<div class="row">
    <div class="box">
        <div class="col-lg-12">
            <hr>
            <h2 class="intro-text text-center">
                Склад
            </h2>
            <hr>

            <fieldset style="border: solid 2px #337AB7;border-radius: 8px;padding: 10px;margin-bottom: 30px;">
                <legend>Приписание цен реализации на материал <i style="color: #FD8B83">{{selectedMaterial.name}} ({{selectedMaterial.unit}})</i></legend>
                <form name="createPriceForm" novalidate>
                    <div class='row'>
                        <div class="form-group">
                            <label class="col-md-1 control-label" for="priceValue"><strong class="error-message">*</strong>Цена</label>
                            <div class="col-md-4">
                                <input type="number" name="priceValue" ng-model="createPrice.priceValue" class="form-control input-md" required>
                            </div>
                            <label class="col-md-1 control-label" for="dateOt"><strong class="error-message">*</strong>Период</label>
                            <div class="col-md-4">
                                <p class="input-group">
                                    <input type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="createPrice.dateOt" datepicker-mode="'month'" is-open="popup.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" show-button-bar="false" alt-input-formats="altInputFormats" />
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-default" ng-click="open()"><i class="glyphicon glyphicon-calendar"></i></button>
                                    </span>
                                </p>
                            </div>
                            <div class="col-md-2">
                                <button type="submit" class="btn btn-primary" ng-click="save(createPrice, createPriceForm)">Добавить</button>
                            </div>
                        </div>

                    </div>           
                </form>
            </fieldset>

            <div style="width: 50%; float: left;">
                <table ng-table="tableParams" show-filter="true" class="table table-bordered table-hover  table-condensed editable-table demoTable" ng-form="tableForm" disable-filter="isAdding" demo-tracked-table="tableTracker">
	                <colgroup span="4">
		                <col width="30"/>
		                <col/>
		                <col width="50"/>
		                <col width="110"/>
	                </colgroup>
                  <tr ng-repeat="row in $data" ng-form="rowForm" demo-tracked-table-row="row" ng-click="setSelected(row.unitMaterialId)" ng-class="{'selected': row.unitMaterialId === createPrice.materialInStoreId, 'mouseEnter': mouseOn==true }" ng-mouseenter="mouseOn=true" ng-mouseleave="mouseOn=false">
                    <td>
                      <a ng-show="row.count>0" ng-click="createExperse(row.unitMaterialId)">
                        <span class="icon">
                          <i aria-hidden="true" class="icon-truck"></i>
                        </span>
                      </a>
                    </td>
                    <td data-title="'Вид материала'" sortable="'kindMaterialName'" filter="{'kindMaterialName': 'text' }" ng-form="kindMaterialName" class="text-left">
                      <span class="editable-text">{{row.kindMaterialName}}</span>
                    </td>
                    <td data-title="'Ед.изм'" sortable="'unitName'" ng-form="unitName" class="text-left">
                      <span class="editable-text">{{row.unitName}}</span>
                    </td>
                    <td data-title="'Кол-во'" sortable="'count'" filter="{'count': 'text' }" ng-form="count" class="text-left">
                      <span class="editable-text">{{row.count}}</span>
                    </td>
                  </tr>
                </table>
            </div>

          <div style="width: 48%; float: right;">
            <table ng-table="tableParamsPrice" class="table table-bordered table-hover table-striped table-condensed editable-table demoTable" ng-form="tableFormPrice" demo-tracked-table="tableTracker">
              <colgroup span="3">
                <col />
                <col />
                <col width="90" />
              </colgroup>
              <tr ng-repeat="rowPrice in $data | filter:{materialInStoreId:createPrice.materialInStoreId}" ng-form="rowFormPrice" demo-tracked-table-row="rowPrice" >
                <td data-title="'Цена реализации'" ng-switch="rowPrice.isEditing" ng-class="priceValue.$dirty ? 'bg-warning' : ''" ng-form="priceValue" demo-tracked-table-cell class="text-left">
                  <span ng-switch-default class="editable-text">{{rowPrice.priceValue | currency : RUB : 0}}</span>
                  <div class="controls" ng-class="priceValue.$invalid && priceValue.$dirty ? 'has-error' : ''" ng-switch-when="true">
                    <input type="text" name="priceValue" ng-model="rowPrice.priceValue" class="editable-input form-control input-sm" required />
                  </div>
                </td>
                <td data-title="'Период'" sortable="'dateOt'" ng-form="dateOt" class="text-left">
                  <span class="editable-text">{{rowPrice.dateOt | date:'MMMM yyyy'}}</span>
                </td>

                <td>
                  <button class="btn btn-primary btn-sm" ng-click="update(rowPrice, rowFormPrice)" ng-if="rowPrice.isEditing" ng-disabled="rowFormPrice.$pristine || rowFormPrice.$invalid"><span class="glyphicon glyphicon-ok"></span></button>
                  <button class="btn btn-default btn-sm" ng-click="cancel(rowPrice, rowFormPrice)" ng-if="rowPrice.isEditing"><span class="glyphicon glyphicon-remove"></span></button>
                  <button class="btn btn-default btn-sm" ng-click="rowPrice.isEditing = true" ng-if="!rowPrice.isEditing"><span class="glyphicon glyphicon-pencil"></span></button>
                  <button class="btn btn-danger btn-sm" ng-click="delete(rowPrice.id)" ng-if="!rowPrice.isEditing"><span class="glyphicon glyphicon-trash"></span></button>
                </td>
              </tr>
            </table>

          </div>

        </div>
    </div>
</div>
